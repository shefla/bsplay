!function(s,a){var e="bsplay",p={volume:50,random:!1,repeat:"off"},t={css:'.bsp-widget{border-radius:4px}.bsp-widget .bsp-next,.bsp-widget .bsp-prev{margin-top:6px}.bsp-widget .bsp-play-pause{border-radius:6px!important}.bsp-widget .bsp-options{margin-top:8px}.bsp-widget .bsp-infos{margin:10px 0 0}.bsp-widget .bsp-volume{margin:0 0 0 12px;width:150px}.bsp-widget .bsp-volume .slider{width:100%}.bsp-widget .bsp-volume .slider-track{background:#fff}.bsp-widget .bsp-volume .slider-selection{background:#5bc0de}.bsp-widget .bsp-volume .slider-handle{color:#fff;background:#337ab7;border:1px solid #2e6da4;font-family:\'Glyphicons Halflings\'}.bsp-widget .bsp-volume-mute .slider-handle:before{content:"\\e036"}.bsp-widget .bsp-volume-half .slider-handle:before{content:"\\e037"}.bsp-widget .bsp-volume-full .slider-handle:before{content:"\\e038"}.bsp-widget .bsp-repeat-all .glyphicon:before{content:"\\e031"}.bsp-widget .panel-body{padding:0}.bsp-widget .panel-body .bsp-scrubber{margin:0;border-radius:0;position:relative}.bsp-widget .panel-body .bsp-scrubber .bsp-loaded,.bsp-widget .panel-body .bsp-scrubber .bsp-progress{position:absolute;top:0;left:0}.bsp-widget .panel-body .alert-danger{display:none;border-radius:0;margin:0}.bsp-widget .bsp-playlist{background:#f5f5f5}.bsp-widget .bsp-playlist .sortable-placeholder{height:41px}.bsp-playing .bsp-play-pause .glyphicon:before{content:"\\e073"}.bsp-error .panel-body .alert-danger{display:block}',createPlayer:{markup:'<div class="panel panel-default bsp-widget"><div class="panel-heading clearfix"><div class="pull-left bsp-cover"></div><div class="btn-group"><a class="btn btn-default bsp-prev"><span class="glyphicon glyphicon-step-backward"></span></a> <a class="btn btn-lg btn-default bsp-play-pause"><span class="glyphicon glyphicon-play"></span></a> <a class="btn btn-default bsp-next"><span class="glyphicon glyphicon-step-forward"></span></a></div><div class="btn bsp-volume bsp-volume-half"><input type="text"></div><div class="btn-group pull-right bsp-options"><a class="btn btn-sm btn-default bsp-random"><span class="glyphicon glyphicon-random"></span></a> <a class="btn btn-sm btn-default bsp-repeat"><span class="glyphicon glyphicon-repeat"></span></a></div><p class="bsp-infos"><span class="glyphicon glyphicon-music"></span> <span class="bsp-active-artist"></span> - <span class="bsp-active-title"></span></p></div><div class="panel-body"><div class="progress bsp-scrubber"><div class="progress-bar progress-bar-info bsp-loaded"></div><div class="progress-bar progress-bar-striped bsp-progress"><span><span class="bsp-played"></span> <span class="bsp-duration hide"></span></span></div></div><div class="alert alert-danger"><button type="button" class="close pull-right" data-dismiss="alert"><span>&times;</span></button><p class="bsp-error-message"></p></div></div><div class="list-group bsp-playlist"><a class="hide list-group-item bsp-track"><span class="glyphicon glyphicon-play-circle"></span> <span class="bsp-artist"></span> - <span class="bsp-title"></span> <span class="badge bsp-length"></span></a></div></div>',playPauseClass:"bsp-play-pause",scrubberClass:"bsp-scrubber",progressClass:"bsp-progress",loaderClass:"bsp-loaded",timeClass:"bsp-infos",durationClass:"bsp-duration",playedClass:"bsp-played",errorMessageClass:"bsp-error-message",playingClass:"bsp-playing",loadingClass:"bsp-loading",errorClass:"bsp-error"},play:function(){var a=l.active=l.tracks[this.mp3],p=a.data(e);l.artist.text(p.artist),l.title.text(p.title),s.each(l.tracks,function(s,a){a.removeClass("active")}),a.addClass("active"),l.progress.addClass("active"),l.wrapper.addClass(t.createPlayer.playingClass),l.toggler.addClass("btn-primary")},pause:function(){l.progress.removeClass("active"),l.wrapper.removeClass(t.createPlayer.playingClass),l.toggler.removeClass("btn-primary")},trackEnded:function(){switch(l.options.repeat){case"off":return l.next();case"one":return l.play(l.active);case"all":var s=l.active.next(".bsp-track");l.play(s.length?s:l.playlist.children(".bsp-track:first-child"))}}},r=function(s){if(!s)return"Error";var a=Math.floor(s/60),e=Math.floor(s%60);return(10>a?"0":"")+a+":"+(10>e?"0":"")+e},l={active:null,tracks:{},randlist:[],init:function(e,r){var l=this;l.options=s.extend({},p,r),l.player=a.create(e[0],t),l.wrapper=s(this.player.wrapper),l.toggler=l.wrapper.find("."+t.createPlayer.playPauseClass),l.slider=this.wrapper.find(".bsp-volume"),l.slider.find("input").slider({min:0,max:100,value:50,formatter:function(s){return"Volume: "+s+"%"}}).on("change",function(s){var a=s.value.newValue;l.player.setVolume(a/100),0===a?l.slider.addClass("bsp-volume-mute").removeClass("bsp-volume-half bsp-volume-full"):a>50?l.slider.addClass("bsp-volume-full").removeClass("bsp-volume-mute bsp-volume-half"):l.slider.addClass("bsp-volume-half").removeClass("bsp-volume-mute bsp-volume-full")}),l.artist=l.wrapper.find(".bsp-active-artist"),l.title=l.wrapper.find(".bsp-active-title"),l.progress=l.wrapper.find(".bsp-progress"),l.playlist=l.wrapper.find(".bsp-playlist"),l.template=l.playlist.find(".bsp-track").remove().removeClass("hide").click(function(){l.play(s(this))}),l.wrapper.find(".bsp-prev").click(function(){l.prev()}),l.wrapper.find(".bsp-next").click(function(){l.next()}),l.wrapper.find(".bsp-random").click(function(){l.options.random=s(this).toggleClass("btn-primary").hasClass("btn-primary"),l.options.random&&l.randomize()}),l.wrapper.find(".bsp-repeat").click(function(){var a=s(this).removeClass("bsp-repeat-"+l.options.repeat);switch(l.options.repeat){case"off":l.options.repeat="one",a.addClass("btn-primary");break;case"one":l.options.repeat="all";break;case"all":l.options.repeat="off",a.removeClass("btn-primary")}a.addClass("bsp-repeat-"+l.options.repeat)}),l.wrapper.find(".alert-danger").alert().on("close.bs.alert",function(){return l.wrapper.removeClass(t.createPlayer.errorClass),!1}),l.player.setVolume(l.options.volume/100),l.active=l.add(e)},add:function(s){var a=this,p=s.attr("src");if(a.tracks[p])return this;var t=p.split("/").pop().replace(/^[\s\._]*\d*[\s\._]*/,"").split(/[\s\._]+-[\s\._]+/),l={path:p,artist:t.length>1?t.shift():"?",title:t.join(" - ").replace(/\.mp3$/i,""),length:r(s.prop("duration"))},i=a.template.clone(!0).data(e,l).appendTo(a.playlist);return i.find(".bsp-artist").text(l.artist),i.find(".bsp-title").text(l.title),i.find(".bsp-length").text(l.length),a.tracks[p]=i,i},play:function(s){this.player.load(s.data(e).path),this.player.play()},pause:function(){this.player.pause()},prev:function(){var s,a=this;return a.options.random?a.next():(s=a.active.prev(".bsp-track"),void(s.length?a.play(s):"all"===a.options.repeat?a.play(a.playlist.children(".bsp-track:last-child")):a.pause()))},next:function(){var s,a=this,e=a.options.random,p="all"===a.options.repeat;if(e&&!a.randlist.length)return a.randomize(),p?a.next():a.pause();var s=e?a.tracks[a.randlist.pop()]:a.active.next(".bsp-track");s.length?a.play(s):p?a.play(a.playlist.children(".bsp-track:first-child")):a.pause()},randomize:function(){for(var a,e,p=this,t=s.map(p.tracks,function(s,a){return s.is(p.active)?void 0:a}),r=t.length-1;r>0;r--)e=Math.floor(Math.random()*(r+1)),a=t[r],t[r]=t[e],t[e]=a;p.randlist=t}};s.fn[e]=function(a){return this.each(function(){var e=s(this);"AUDIO"===e.prop("tagName")&&(l.player?l.add(e):l.init(e,a),l.playlist.sortable())})}}(jQuery,audiojs);